<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yuan.mapper.ArrangeMapper">
    <!-- 排班模块  -->
    <select id="getArrangeList" resultType="com.yuan.domain.Arrange">
        select * from arrange where c_id =#{id} and date_format(date,'%Y-%m') =date_format(#{date},'%Y-%m')
    </select>

    <insert id="saveArrangeList" parameterType="java.util.List">
        insert into arrange values
        <foreach collection ="list" item="arrange" separator =",">
            (#{arrange.id},#{arrange.c_id},#{arrange.work},#{arrange.type},#{arrange.subject},#{arrange.date}
            ,#{arrange.a},#{arrange.b},#{arrange.c},#{arrange.d},#{arrange.e},#{arrange.f})
        </foreach >
    </insert>

    <update id="updateArrange">
        update arrange set work=#{work},type=#{type},subject=#{subject} where c_id=#{c_id} and date=date_format(#{date},'%Y-%m-%d')
    </update>

    <delete id="deleteArrange">
        delete from arrange where c_id =#{id} and date_format(date,'%Y-%m') =date_format(#{date},'%Y-%m')
    </delete>

    <delete id="deleteArrangeAll">
        delete from arrange where c_id =#{id}
    </delete>
    
    <delete id="deleteArrangeList">
        delete from arrange where c_id in
            <foreach collection="list" item="id" separator="," open="(" close=")">
                #{id}
            </foreach>
    </delete>

</mapper>
